/*! react-multiselect - v0.3.2 - 2015-04-26 */
!function(a,b){"object"==typeof exports?module.exports=b(require("react/addons")):a.MultiSelect=b(a.React)}(this,function(a){var b=a.createClass({displayName:"MultiSelectItem",getDefaultProps:function(){return{visible:!0,selected:!1,text:"",onClick:function(){}}},render:function(){return this.props.visible&&a.DOM.li({className:this.props.selected?"selected":"deselected",onClick:this.props.onClick},this.props.text)}}),c=a.createClass({displayName:"MultiSelect",getDefaultProps:function(){return{items:[],placeholder:"Enter some filter text",onChange:function(){},onItemSelected:function(){},onItemDeselected:function(){}}},getInitialState:function(){return{selections:{},filter:""}},handleItemClick:function(a){this.setSelected(a,!this.state.selections[a.id])},handleFilterChange:function(a){this.setState({filter:a.target.value})},escapeRegExp:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createItem:function(a){var c=new RegExp(".*"+this.escapeRegExp(this.state.filter)+".*","i"),d="text"in a?a.text:"name"in a?a.name:a.id;return b({key:a.id,text:d,onClick:this.handleItemClick.bind(this,a),visible:c.test(d),selected:this.state.selections[a.id]?!0:!1})},selectAll:function(a){this.setSelected(this.props.items,!0)},selectNone:function(a){this.setSelected(this.props.items,!1)},setSelected:function(a,b){a instanceof Array||(a=[a]);var c=this.state.selections;for(var d in a)c[a[d].id]=b,b?this.props.onItemSelected(a[d]):this.props.onItemDeselected(a[d]);this.setState({selections:c}),this.props.onChange(c)},render:function(){return a.DOM.div({className:"multiselect"},a.DOM.input({onChange:this.handleFilterChange,value:this.state.filter,placeholder:this.props.placeholder}),a.DOM.ul(null,this.props.items.map(this.createItem)),a.DOM.button({onClick:this.selectAll},"Select all"),"Â ",a.DOM.button({onClick:this.selectNone},"Select none"))}});return c});